<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Libre+Baskerville:wght@700&family=Poppins:ital,wght@0,300;0,400;0,500;1,400&display=swap"
      rel="stylesheet"
    />
    <script src="https://kit.fontawesome.com/5cb8a0be4f.js"></script>
    <style>
      body {
        margin: 0;
        padding: 0;
        font-family: "Poppins";
      }

      #poster-top {
        margin: auto;
        margin-top: 1rem;
        /* border: 1px solid; */
        padding: 3rem 0rem;
        box-sizing: border-box;
      }
      #poster-top img {
        width: 100%;
        display: block;
        margin: auto;
        box-sizing: border-box;
      }
      #page-container {
        border-top: 1px solid rgb(211, 209, 209);
        display: flex;
        justify-content: space-between;
        padding: 0.5rem;
      }
      #left-section {
        /* border: 1px solid rebeccapurple; */
        width: 50%;
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        /* gap: 1rem; */
      }
      #left-section div {
        box-sizing: border-box;
        padding: 0.5rem;
      }
      #left-section img {
        width: 100%;
        box-sizing: border-box;
        border-bottom: 1px solid;
      }
      #right-section {
        width: 50%;
        /* border: 1px solid; */
        box-sizing: border-box;
        padding: 0.5rem;
      }
      #product-title {
        /* border: 1px solid; */
        padding: 0.5rem;
        box-sizing: border-box;
        line-height: 0.3;
        color: rgb(77, 69, 69);
        border-bottom: 1px solid rgb(151, 145, 145);
      }
      #product-title p {
        color: rgb(151, 145, 145);
        font-size: 0.8rem;
      }
      #product-price {
        padding: 0.5rem;
        font-size: 1.5rem;
        line-height: 1;
        box-sizing: border-box;
        color: rgb(77, 69, 69);
      }
      #size-chart {
        /* border: 1px solid; */
        padding: 0 0.5rem;
        font-size: 1rem;
        line-height: 1;
        box-sizing: border-box;
        color: rgb(77, 69, 69);
      }
      #size-chart-buttons {
        width: 60%;
        /* border: 1px solid; */
        margin: 1rem 0;
        display: flex;
        justify-content: space-between;
      }
      #size-chart-buttons button {
        width: 13%;
        border-radius: 2cqmax;
        border: 2px solid rgb(199, 196, 196);
        padding: 0.5rem;
        background-color: white;
        box-sizing: border-box;
      }
      #size-chart-buttons button:hover {
        border: 2px solid rgb(118, 117, 117);
        cursor: pointer;
        box-sizing: border-box;
        font-weight: bold;
      }

      #product-quantity {
        /* border: 1px solid; */
        padding: 0.5rem;
        font-size: 0.8rem;
        line-height: 1;
        box-sizing: border-box;
        color: rgb(77, 69, 69);
      }
      #product-quantity-select {
        padding: 0.2rem;
        border-radius: 5px;
      }
      #add-to-cart-and-add-to-whishlist-btn {
        /* border: 1px solid; */
        padding: 0.5rem;
        width: 70%;
        display: flex;
        margin-top: 1rem;
        justify-content: space-between;
      }
      #add-to-cart-and-add-to-whishlist-btn button {
        padding: 0.8rem;
        width: 35%;
        font-size: 1rem;
        cursor: pointer;
        background-color: white;
        border: 1px solid rgb(62, 236, 242);
        font-weight: bold;
      }
      #add-to-cart-and-add-to-whishlist-btn button:nth-child(1) {
        width: 60%;
        background-color: red;
        color: white;
        border: none;
      }
      #add-to-cart-and-add-to-whishlist-btn button:nth-child(1):hover {
        background-color: rgb(239, 66, 8);
      }

      #add-to-cart-and-add-to-whishlist-btn button:nth-child(2):hover {
        border: 1px solid rgb(9, 147, 119);
        color: black;
        box-sizing: border-box;
      }
      #share-and-icons {
        width: 40%;
        /* border: 1px solid; */
        padding: 0.5rem;
        margin-top: 1rem;
        font-size: 0.8rem;
        display: flex;
        align-items: center;
        line-height: 1;
        box-sizing: border-box;
        color: rgb(77, 69, 69);
      }
      #share-and-icons span {
        width: 50%;
        font-size: 1rem;
      }
      #share-and-icons span i {
        font-size: 1.2rem;
        margin: 0 0.1rem;
        cursor: pointer;
      }
      #drop-downs {
        /* border: 1px solid; */
        padding: 0.5rem;
      }
      .click-divs {
        border: 1px solid rgb(209, 207, 207);
        padding: 0.5rem;
        /* margin: 0.5rem 0; */
        cursor: pointer;
      }
      .open-click-div {
        border: 1px solid rgb(209, 207, 207);
        display: none;
        line-height: 1.2;
        font-size: 0.9rem;
        padding: 1rem;
        box-sizing: border-box;
      }
    </style>
  </head>
  <body>
    <div id="poster-top">
      <img src="./img/Sara_Homepage_cS1WnKo.webp" alt="" />
    </div>
    <div id="page-container">
      <div id="left-section"></div>

      <div id="right-section">
        <div id="product-title">
          <h2>TSS Originals: Never Mind</h2>
          <p>Women Oversized Cropped T-Shirts</p>
        </div>

        <div id="product-price">
          <h4>$ 599</h4>
        </div>

        <div id="size-chart">
          <p>Please select a size. <a href="">SIZE CHART</a></p>
        </div>
        <div id="size-chart-buttons">
          <button id="XXS" onclick="selectsizefun(id)">XXS</button>
          <button id="XS" onclick="selectsizefun(id)">XS</button>
          <button id="S" onclick="selectsizefun(id)">S</button>
          <button id="ML" onclick="selectsizefun(id)">ML</button>
          <button id="XL" onclick="selectsizefun(id)">XL</button>
          <button id="XXL" onclick="selectsizefun(id)">XXL</button>
          <button id="XXXL" onclick="selectsizefun(id)">XXXL</button>
        </div>

        <div id="product-quantity">
          <span>Quantity</span> &nbsp;
          <span>
            <select name="" id="product-quantity-select">
              <option value="1" default>1</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5</option>
              <option value="6">6</option>
              <option value="7">7</option>
              <option value="8">8</option>
              <option value="9">9</option>
              <option value="10">10</option>
            </select>
          </span>
        </div>

        <div id="add-to-cart-and-add-to-whishlist-btn">
          <button onclick="addtoCartfun()">Add To Cart</button
          ><button>ðŸ’š Add To Wishlist</button>
        </div>
        <div id="share-and-icons">
          <span>Share</span>
          <span>
            <i class="fa-brands fa-instagram"></i>
            <i class="fa-brands fa-facebook"></i>
            <i class="fa-brands fa-twitter"></i>
            <i class="fa-brands fa-whatsapp"></i>
          </span>
        </div>
        <div id="drop-downs">
          <div class="click-divs">Product Details</div>
          <div class="open-click-div">
            <div>
              <h4>Material & Care:</h4>
              <p>100% Cotton</p>
              <p>Machine Wash</p>
            </div>
            <div>
              <h4>Country of Origin: India (and proud)</h4>
            </div>
            <div>
              <h4>Manufactured & Sold By:</h4>
              <p>The TRY_LEAF Fashions Pvt. Ltd.</p>
              <p>224, Tantia Jogani Industrial Premises</p>
              <p>J.R. Boricha Marg</p>
              <p>Lower Parel (E)</p>
              <p>Mumbai - 11</p>
              <p><a href="#">connect@tryleafasions.com</a></p>
            </div>
          </div>

          <div class="click-divs">Product Description</div>
          <div class="open-click-div">
            <p>
              Buy TSS Originals Never Mind Women's Oversized Cropped T-Shirts at
              The TRY-LEAF Fashions.
            </p>
          </div>

          <div class="click-divs">Artist's Details</div>
          <div class="open-click-div">
            <p>
              The TRY-LEAF Fashions was born out of a simple idea - love what
              you do and follow your soul! Thus, our goal is to give everyone
              something they'll love, something they can use to express
              themselves, and, simply put, something to put a smile on their
              face. So, whether it's superheroes like Superman, TV shows like
              F.R.I.E.N.D.S, pop culture, music, sports, or quirky, funny stuff
              you're looking for, we have something for everyone. TSS Originals
              or The TRY-LEAF Fashions Originals is our exclusive range of
              funny, funky, trendy and stylish designs. Designed by our kick-ass
              team of in-house designers, TSS Originals are some cool and quirky
              designs that help you speak your vibe.
            </p>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
<script>
  let productsIncart =
    JSON.parse(sessionStorage.getItem("productsIncart")) || [];
  const left_section = document.getElementById("left-section");
  const product_title = document.querySelector("#product-title h2");
  const product_title_desc = document.querySelector("#product-title p");
  const product_price = document.querySelector("#product-price h4");
  let product = [];
  let Productprice = 1;
  const appendfun = (data) => {
    Productprice = +product.price;
    product = data;
    let img1 = data.image[0];
    let img2 = data.image[1];

    product_title.innerHTML = data.title;
    product_title_desc.innerHTML = data.property + " " + data.theme;
    product_price.innerHTML = "$ " + data.price;

    left_section.innerHTML = null;
    const div = `
        <div>
          <img src="${img1}" alt="error" />
        </div>
        <div>
          <img src="${img2}" alt="error" />
        </div>

   `;
    left_section.innerHTML = div;
  };
  const fetchOnlyfun = async () => {
    const id = sessionStorage.getItem("productid");
    const promise = await fetch(`http://localhost:7200/products/${id}`);
    const res = await promise.json();
    appendfun(res);
  };
  fetchOnlyfun();

  const click_divs = document.getElementsByClassName("click-divs");
  const open_click_div = document.getElementsByClassName("open-click-div");

  for (let i = 0; i < click_divs.length; i++) {
    click_divs[i].addEventListener("click", () => {
      if (open_click_div[i].style.display === "block") {
        open_click_div[i].style.display = "none";
      } else {
        open_click_div[i].style.display = "block";
      }
    });
  }

  // selecting the size

  let check = false;
  let productSize = "size";
  const selectsizefun = (size) => {
    const size_chart_buttons = document.querySelectorAll(
      "#size-chart-buttons button"
    );
    check = true;
    productSize = size;
    const btn = document.getElementById(`${size}`);
    for (let i = 0; i < size_chart_buttons.length; i++) {
      size_chart_buttons[i].style.backgroundColor = "white";
    }
    btn.style.backgroundColor = "rgb(209, 207, 207)";
  };

  // quantity

  const product_quantity = document.getElementById("product-quantity-select");
  console.log(product_quantity.value);
  let qtyclick = 0;
  product_quantity.addEventListener("change", () => {
    qtyclick = 1;
    Productprice = +product.price * +product_quantity.value;
  });

  // to add to cart
  const addtoCartfun = () => {
    // getting the data to compare
    let productsIncart =
      JSON.parse(sessionStorage.getItem("productsIncart")) || [];
    let flag = false;
    for (let i = 0; i < productsIncart.length; i++) {
      if (
        product._id === productsIncart[i].id &&
        productSize == productsIncart[i].size
      ) {
        flag = true;
        break;
      }
    }

    // check all conditions and then add to the cart
    if (check == true && flag === false) {
      if (qtyclick == 0) {
        Productprice = +product.price;
      }
      let productobj = {
        id: product._id,
        size: productSize,
        totalPrice: Productprice,
      };
      productsIncart.push(productobj);
      sessionStorage.setItem("productsIncart", JSON.stringify(productsIncart));
      alert("Product Added to the Cart");
      window.location.assign("cartpage")
    } else if (check === false) {
      alert("Please Select size");
    } else {
      alert("Product Already in the cart");
    }
  };
</script>
